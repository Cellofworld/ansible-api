–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
üöÄ –ó–∞–ø—É—Å–∫ Ansible playbooks —á–µ—Ä–µ–∑ API

üì¶ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

‚è± –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Go 1.16+

PostgreSQL 12+

Ansible 2.9+

–£—Å—Ç–∞–Ω–æ–≤–∫–∞
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

bash
git clone https://github.com/yourusername/ansible-api.git
cd ansible-api
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
go mod download
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª config.yaml –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

yaml
server:
  port: "8080"
  playbooks_dir: "./playbooks"
  read_timeout: 30s
  write_timeout: 30s

database:
  host: "localhost"
  port: 5432
  user: "ansible"
  password: "password"
  name: "ansible_api"
  sslmode: "disable"

logging:
  retention_days: 30
  page_size: 20
–ó–∞–ø—É—Å–∫
bash
go run main.go
–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080

API Endpoints
–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏
POST /api/inventories - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

GET /api/inventories - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–π

GET /api/inventories/{name} - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ –∏–º–µ–Ω–∏

PUT /api/inventories/{name} - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

DELETE /api/inventories/{name} - –£–¥–∞–ª–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

POST /api/inventories/{name}/check - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–æ–≤

Playbooks
GET /api/playbooks - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö playbooks

POST /api/run - –ó–∞–ø—É—Å—Ç–∏—Ç—å playbook

–õ–æ–≥–∏
GET /api/runs - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤

GET /api/runs/{id} - –î–µ—Ç–∞–ª–∏ –∑–∞–ø—É—Å–∫–∞

GET /api/logs - –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

GET /api/logs/{id} - –î–µ—Ç–∞–ª–∏ –ª–æ–≥–∞

–ü—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–π
GET /api/inventory-checks - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫

GET /api/inventory-checks/{id} - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
bash
curl -X POST http://localhost:8080/api/inventories \
  -H "Content-Type: application/json" \
  -d '{
    "name": "production",
    "content": "[web]\nserver1 ansible_host=192.168.1.100\nserver2 ansible_host=192.168.1.101"
  }'
–ó–∞–ø—É—Å–∫ playbook
bash
curl -X POST http://localhost:8080/api/run \
  -H "Content-Type: application/json" \
  -d '{
    "playbook": "deploy.yml",
    "inventory": "production",
    "extra_vars": {
      "version": "1.0.0"
    }
  }'
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤
bash
curl -X POST http://localhost:8080/api/inventories/production/check
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è playbooks:

bash
mkdir playbooks
–ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à–∏ playbook-—Ñ–∞–π–ª—ã (—Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .yml) –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é playbooks

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –≤ —Ñ–∞–π–ª–µ config.yaml

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production
–î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫:

bash
go build -o ansible-api
–ó–∞–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ systemd –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å reverse proxy (Nginx/Apache) –¥–ª—è HTTPS

–õ–∏—Ü–µ–Ω–∑–∏—è
MIT License